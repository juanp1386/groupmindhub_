{% load static %}
<!doctype html>
<html lang="en" data-theme="light">
<head>
  <meta charset="utf-8" />
  <title>GroupMindHub</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link id="siteFavicon" rel="icon" type="image/png" href="{% static 'img/favicon-light.png' %}" />
    <style>
    :root{
      --palette-1:#dadccf;
      --palette-2:#000000;
      --palette-3:#85c4c0;
      --palette-4:#fdfceb;
      --palette-5:#7ebfbd;
      --accent-rgb:133,196,192;

      --bg:var(--palette-4);
      --panel:var(--palette-1);
      --panel-soft:#d6dacc;
      --border:#c3c9bb;
      --text:var(--palette-2);
      --muted:#52625f;
      --accent:var(--palette-3);
      --accent-strong:var(--palette-5);
      --shadow:rgba(0,0,0,0.08);
    }

    [data-theme='dark']{
      --bg:#0f1a1d;
      --panel:#142327;
      --panel-soft:#1f3337;
      --border:#243f44;
      --text:#f4faf9;
      --muted:#9bb5b2;
      --accent:#7ebfbd;
      --accent-strong:#9bd7d4;
      --shadow:rgba(0,0,0,0.45);
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      padding:0 0 48px;
      background:var(--bg);
      color:var(--text);
      font-family:'Inter',-apple-system,BlinkMacSystemFont,'Segoe UI',Helvetica,Arial,sans-serif;
      line-height:1.55;
    }
    a{color:var(--accent);text-decoration:none}
    a:hover{color:var(--accent-strong)}
    header{background:linear-gradient(135deg,rgba(var(--accent-rgb),0.85),rgba(126,191,189,0.8));border-bottom:1px solid var(--border);position:sticky;top:0;z-index:20;backdrop-filter:blur(12px)}
    [data-theme='dark'] header{background:linear-gradient(135deg,rgba(12,32,34,0.92),rgba(18,49,52,0.92));}
    footer{background:rgba(var(--accent-rgb),0.15);border-top:1px solid var(--border);padding:14px 0;margin-top:48px}
    [data-theme='dark'] footer{background:rgba(12,32,34,0.8);}
    .wrap{max-width:1100px;margin:0 auto;padding:0 24px}
    .site-head{display:flex;align-items:center;justify-content:space-between;min-height:68px}
    .brand{display:flex;align-items:center;gap:14px}
    .brand-logo{height:57px;width:auto;display:block}
    .brand-logo-dark{display:none}
    [data-theme='dark'] .brand-logo-light{display:none}
    [data-theme='dark'] .brand-logo-dark{display:block}
    .brand-link{color:var(--text);font-size:19px;font-weight:600;display:inline-flex;flex-direction:column;gap:2px}
    .brand-sub{color:var(--muted);font-size:11px;text-transform:uppercase;letter-spacing:0.08em}
    .site-head nav{display:flex;align-items:center;gap:16px;font-size:13px;color:var(--muted)}
    .theme-toggle{display:inline-flex;align-items:center;gap:10px;background:var(--panel-soft);border:1px solid var(--border);color:var(--text);padding:6px 14px;border-radius:999px;font-size:12px;font-weight:500;letter-spacing:.05em;text-transform:uppercase;cursor:pointer;transition:all .2s ease}
    .theme-toggle:hover{border-color:var(--accent);box-shadow:0 6px 16px rgba(var(--accent-rgb),0.18)}
    .theme-toggle .toggle-track{position:relative;width:40px;height:20px;border-radius:999px;background:rgba(var(--accent-rgb),0.3);flex-shrink:0;transition:background .2s}
    .theme-toggle .toggle-thumb{position:absolute;top:2px;left:2px;width:16px;height:16px;border-radius:50%;background:var(--accent);transition:transform .2s,background .2s}
    .theme-toggle .toggle-label{font-weight:600}
    [data-theme='dark'] .theme-toggle{background:var(--panel-soft);color:var(--text)}
    [data-theme='dark'] .theme-toggle .toggle-track{background:rgba(255,255,255,0.25)}
    [data-theme='dark'] .theme-toggle .toggle-thumb{transform:translateX(18px);background:var(--accent-strong)}
    .pill{display:inline-flex;align-items:center;gap:6px;padding:4px 10px;border-radius:999px;font-size:11px;background:rgba(var(--accent-rgb),0.18);color:var(--accent);border:1px solid rgba(var(--accent-rgb),0.35)}
    [data-theme='dark'] .pill{background:rgba(var(--accent-rgb),0.25);color:var(--text);border-color:rgba(255,255,255,0.25)}
    .card{background:var(--panel);border:1px solid var(--border);border-radius:14px;padding:20px;margin:20px 0;box-shadow:0 24px 48px var(--shadow)}
    .btn{display:inline-flex;align-items:center;justify-content:center;gap:6px;padding:8px 14px;border-radius:10px;font-size:14px;font-weight:500;color:var(--text);background:var(--panel-soft);border:1px solid var(--border);transition:all .18s ease}
    .btn:hover{color:var(--accent);border-color:var(--accent)}
    input,button,textarea,select{background:var(--panel-soft);color:var(--text);border:1px solid var(--border);border-radius:10px;padding:7px 12px;font-family:inherit;font-size:14px}
    input:focus,select:focus,textarea:focus{outline:2px solid rgba(var(--accent-rgb),0.45)}
    button{cursor:pointer;transition:all .18s ease}
    button.primary{background:var(--accent);color:var(--bg);border-color:transparent;font-weight:600}
    button.primary:hover{background:var(--accent-strong)}
    button.ghost{background:transparent;border-color:var(--border);color:var(--muted)}
    button.ghost:hover{border-color:var(--accent);color:var(--accent)}
    table{border-collapse:collapse;width:100%;background:var(--panel);border-radius:12px;overflow:hidden;box-shadow:0 12px 24px rgba(0,0,0,0.06)}
    th,td{border:1px solid var(--border);padding:10px 12px;text-align:left;font-size:14px}
    th{background:var(--panel-soft);text-transform:uppercase;letter-spacing:.05em;color:var(--muted);font-size:12px}
    .muted{color:var(--muted);font-size:12px}
    .status-pill{display:inline-flex;align-items:center;gap:6px;padding:3px 10px;border-radius:999px;font-size:11px;background:rgba(var(--accent-rgb),0.18);color:var(--accent);border:1px solid rgba(var(--accent-rgb),0.35)}
    .sim-select{display:flex;align-items:center;gap:8px;font-size:12px;color:var(--muted)}
    .sim-select select{padding:5px 10px;font-size:13px;border-radius:8px}
    .sim-current{color:var(--accent);font-weight:600}
    main.wrap{padding-top:48px}
    [data-theme='dark'] .status-pill{background:rgba(var(--accent-rgb),0.25);color:var(--text);border-color:rgba(255,255,255,0.25)}
  </style>
</head>
<body>
  <header>
    <div class="wrap site-head">
      <div class="brand">
        <a href="/">
          <img class="brand-logo brand-logo-light" src="{% static 'img/logo-light.png' %}" alt="GroupMindHub" />
          <img class="brand-logo brand-logo-dark" src="{% static 'img/logo-dark.png' %}" alt="GroupMindHub" />
        </a>
        <a href="/" class="brand-link">GroupMindHub<span class="brand-sub">Collaborative Law Authoring</span></a>
        <a href="/" class="pill">Home</a>
        <form id="simUserForm" method="post" action="/" class="sim-select">
          {% csrf_token %}
          <input type="hidden" name="action" value="noop" />
          <label>Sim user:
            <select name="sim_user" id="simUserSelect" onchange="window.__setSimUser(this.value)">
              <option value="">(none)</option>
              <option value="ana">ana</option>
              <option value="ben">ben</option>
              <option value="chen">chen</option>
              <option value="devi">devi</option>
              <option value="eli">eli</option>
              <option value="demo">demo</option>
            </select>
          </label>
        </form>
      </div>
      <nav>
        <button type="button" id="themeToggle" class="theme-toggle" aria-label="Toggle theme">
          <span class="toggle-track"><span class="toggle-thumb"></span></span>
          <span class="toggle-label" id="themeToggleLabel">Light</span>
        </button>
        <span id="simUserActive" class="sim-current"></span>
        {% if user.is_authenticated %}
          <a href="/logout/">Logout</a>
        {% else %}
          <a href="/login/">Login</a>
        {% endif %}
      </nav>
    </div>
  </header>
  <main class="wrap">
    {% block content %}{% endblock %}
  </main>
  <footer>
    <div class="wrap muted">MVP Prototype Â· {{ request.path }}</div>
  </footer>
  {% block extra_js %}{% endblock %}
<script>
  (function(){
    const key='gmh_sim_user';
    window.__setSimUser=function(u){localStorage.setItem(key,u||'');document.getElementById('simUserActive').textContent=u?('Simulating: '+u):'No sim user';};
    const cur=localStorage.getItem(key)||'';const sel=document.getElementById('simUserSelect');if(sel){sel.value=cur;}
    window.__setSimUser(cur);

    const themeKey='gmh_theme';
    const root=document.documentElement;
    const toggle=document.getElementById('themeToggle');
    const toggleLabel=document.getElementById('themeToggleLabel');
    const favicon=document.getElementById('siteFavicon');
    const applyTheme=(theme)=>{
      root.setAttribute('data-theme', theme);
      if(favicon){
        favicon.href = theme==='dark' ? "{% static 'img/favicon-dark.png' %}" : "{% static 'img/favicon-light.png' %}";
      }
      if(toggle){
        toggle.setAttribute('aria-label', theme==='dark' ? 'Switch to light mode' : 'Switch to dark mode');
      }
      if(toggleLabel){ toggleLabel.textContent = theme==='dark' ? 'Dark' : 'Light'; }
    };
    let storedTheme = localStorage.getItem(themeKey);
    if(!storedTheme){
      storedTheme = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
    }
    applyTheme(storedTheme);
    if(toggle){
      toggle.addEventListener('click', ()=>{
        const next = root.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
        localStorage.setItem(themeKey, next);
        applyTheme(next);
      });
    }
  })();
</script>
</body>
</html>
